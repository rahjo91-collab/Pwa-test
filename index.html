<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Family Dashboard - Shared chores and todo list">
    <meta name="theme-color" content="#4285f4">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Family">
    <meta name="mobile-web-app-capable" content="yes">

    <link rel="manifest" href="./manifest.json">
    <link rel="icon" type="image/png" href="./icon-192x192.png">
    <link rel="apple-touch-icon" href="./icon-192x192.png">
    <link rel="stylesheet" href="./styles.css">

    <title>Family Dashboard</title>
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <h1>Family Dashboard</h1>
                <p class="version" id="app-version">v0.0.0</p>
            </div>
            <button id="install-btn" class="install-btn" style="display: none;">Install App</button>
        </header>

        <!-- Tab Navigation -->
        <nav class="tab-nav">
            <button class="tab-btn active" data-view="dashboard">
                <span class="tab-icon">&#127968;</span>
                <span class="tab-label">Dashboard</span>
            </button>
            <button class="tab-btn" data-view="chores">
                <span class="tab-icon">&#9745;</span>
                <span class="tab-label">Chores</span>
            </button>
            <button class="tab-btn" data-view="family">
                <span class="tab-icon">&#128106;</span>
                <span class="tab-label">Family</span>
            </button>
            <button class="tab-btn" data-view="dev">
                <span class="tab-icon">&#128295;</span>
                <span class="tab-label">Dev</span>
            </button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- ===== Dashboard View ===== -->
            <div id="view-dashboard" class="view active">
                <div class="summary-cards summary-cards-compact">
                    <div class="summary-card summary-today">
                        <div class="summary-number" id="stat-today">0</div>
                        <div class="summary-label">Due Today</div>
                    </div>
                    <div class="summary-card summary-overdue">
                        <div class="summary-number" id="stat-overdue">0</div>
                        <div class="summary-label">Overdue</div>
                    </div>
                    <div class="summary-card summary-done">
                        <div class="summary-number" id="stat-done-today">0</div>
                        <div class="summary-label">Done Today</div>
                    </div>
                </div>

                <section class="dashboard-section" id="section-overdue" style="display:none;">
                    <h3 class="section-title section-title-overdue">Overdue</h3>
                    <div id="dashboard-overdue" class="chore-cards"></div>
                </section>

                <section class="dashboard-section" id="section-today">
                    <h3 class="section-title">Today's Chores</h3>
                    <div id="dashboard-today" class="chore-cards"></div>
                    <p id="today-empty" class="empty-hint" style="display:none;">All clear for today!</p>
                </section>

                <div class="give-me-a-job-wrap">
                    <button class="give-me-a-job-btn" onclick="giveJob()">Give Me A Job</button>
                </div>
                <div id="give-me-a-job-result" class="give-job-result" style="display:none;"></div>
            </div>

            <!-- ===== Chores View ===== -->
            <div id="view-chores" class="view">
                <div class="chores-header">
                    <div class="chores-filters">
                        <select id="filter-status" class="filter-select">
                            <option value="all">All Active</option>
                            <option value="today">Due Today</option>
                            <option value="overdue">Overdue</option>
                            <option value="upcoming">Upcoming (7 days)</option>
                            <option value="grace">In Grace Period</option>
                            <option value="paused">Paused</option>
                        </select>
                        <select id="filter-member" class="filter-select">
                            <option value="all">All Members</option>
                        </select>
                        <select id="filter-category" class="filter-select">
                            <option value="all">All Categories</option>
                            <option value="kitchen">Kitchen</option>
                            <option value="bathroom">Bathroom</option>
                            <option value="bedroom">Bedroom</option>
                            <option value="living_room">Living Room</option>
                            <option value="garden">Garden</option>
                            <option value="laundry">Laundry</option>
                            <option value="shopping">Shopping</option>
                            <option value="pets">Pets</option>
                            <option value="general">General</option>
                            <option value="other">Other</option>
                        </select>
                        <select id="filter-priority" class="filter-select">
                            <option value="all">All Priorities</option>
                            <option value="critical">Critical</option>
                            <option value="high">High</option>
                            <option value="medium">Medium</option>
                            <option value="low">Low</option>
                        </select>
                    </div>
                </div>
                <div id="chores-list" class="chore-cards"></div>
                <div id="chores-empty" class="empty-state" style="display: none;">
                    <p>No chores match your filters. Try changing filters or add a new chore.</p>
                </div>
            </div>

            <!-- ===== Family View ===== -->
            <div id="view-family" class="view">
                <div class="family-header">
                    <h3>Family Members</h3>
                    <button id="btn-add-member" class="btn-primary btn-sm">+ Add Member</button>
                </div>
                <div id="family-list" class="family-grid"></div>
                <div id="family-empty" class="empty-state" style="display: none;">
                    <p>No family members yet. Add your first family member to get started!</p>
                </div>
            </div>
            <!-- ===== Dev View ===== -->
            <div id="view-dev" class="view">
                <div class="dev-header">
                    <h3>Developer Tools</h3>
                    <span class="dev-badge">DEV MODE</span>
                </div>

                <div id="dev-log" class="dev-log">
                    <div class="dev-log-header">
                        <span>Log Output</span>
                        <button class="btn-sm btn-secondary" onclick="devClearLog()">Clear</button>
                    </div>
                    <div id="dev-log-content" class="dev-log-content">Ready.</div>
                </div>

                <!-- DB Stats -->
                <div class="dev-section">
                    <h4 class="dev-section-title">Database Stats</h4>
                    <div id="dev-stats" class="dev-stats"></div>
                    <button class="dev-btn" onclick="devRefreshStats()">Refresh Stats</button>
                </div>

                <!-- Quick Setup -->
                <div class="dev-section">
                    <h4 class="dev-section-title">Quick Setup</h4>
                    <p class="dev-desc">Seed sample data to quickly populate the app for testing.</p>
                    <div class="dev-btn-grid">
                        <button class="dev-btn dev-btn-blue" onclick="devSeedFamily()">Seed Sample Family (4 members)</button>
                        <button class="dev-btn dev-btn-blue" onclick="devSeedChores()">Seed Sample Chores (~15 chores)</button>
                        <button class="dev-btn dev-btn-blue" onclick="devSeedAll()">Seed Everything (Family + Chores)</button>
                    </div>
                </div>

                <!-- Bulk Chore Generation -->
                <div class="dev-section">
                    <h4 class="dev-section-title">Bulk Chore Generator</h4>
                    <p class="dev-desc">Quickly generate lots of chores with random settings to stress-test the UI.</p>
                    <div class="dev-btn-grid">
                        <button class="dev-btn dev-btn-green" onclick="devAddRandomChores(5)">+ 5 Random Chores</button>
                        <button class="dev-btn dev-btn-green" onclick="devAddRandomChores(15)">+ 15 Random Chores</button>
                        <button class="dev-btn dev-btn-green" onclick="devAddRandomChores(50)">+ 50 Random Chores</button>
                    </div>
                    <div class="dev-btn-grid" style="margin-top:8px;">
                        <button class="dev-btn dev-btn-green" onclick="devAddOverdueChores(5)">+ 5 Overdue Chores</button>
                        <button class="dev-btn dev-btn-green" onclick="devAddTodayChores(5)">+ 5 Due-Today Chores</button>
                        <button class="dev-btn dev-btn-green" onclick="devAddGracePeriodChores(5)">+ 5 In-Grace-Period</button>
                    </div>
                </div>

                <!-- Simulate Activity -->
                <div class="dev-section">
                    <h4 class="dev-section-title">Simulate Activity</h4>
                    <p class="dev-desc">Create fake completion history and test the leaderboard/stats.</p>
                    <div class="dev-btn-grid">
                        <button class="dev-btn dev-btn-purple" onclick="devSimulateCompletions(10)">Simulate 10 Completions</button>
                        <button class="dev-btn dev-btn-purple" onclick="devSimulateCompletions(50)">Simulate 50 Completions</button>
                        <button class="dev-btn dev-btn-purple" onclick="devCompleteAllToday()">Complete All Due Today</button>
                        <button class="dev-btn dev-btn-purple" onclick="devPostponeAllToday()">Postpone All Due Today</button>
                    </div>
                </div>

                <!-- Notifications -->
                <div class="dev-section">
                    <h4 class="dev-section-title">Notifications</h4>
                    <p class="dev-desc">Test notifications. You must grant permission first. Android supports up to 2 action buttons.</p>
                    <div id="dev-notif-status" class="dev-notif-status"></div>
                    <div class="dev-btn-grid">
                        <button class="dev-btn dev-btn-orange" onclick="devRequestNotifPermission()">Request Permission</button>
                    </div>

                    <!-- Quick-fire presets -->
                    <h5 class="dev-subsection-title">Quick Presets</h5>
                    <div class="dev-btn-grid">
                        <button class="dev-btn dev-btn-orange" onclick="devFireBasicNotif()">Basic</button>
                        <button class="dev-btn dev-btn-orange" onclick="devFireChoreReminder()">Chore Reminder</button>
                        <button class="dev-btn dev-btn-orange" onclick="devFireOverdueAlert()">Overdue Alert</button>
                        <button class="dev-btn dev-btn-orange" onclick="devFireSWNotif()">Via SW</button>
                    </div>

                    <!-- Custom Notification Builder -->
                    <div class="dev-custom-notif">
                        <h5>Custom Notification Builder</h5>

                        <div class="form-group">
                            <label>Title</label>
                            <input type="text" id="dev-notif-title" placeholder="Title" value="Family Dashboard">
                        </div>
                        <div class="form-group">
                            <label>Body</label>
                            <textarea id="dev-notif-body" rows="2" placeholder="Notification body text">Time to do your chores!</textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Tag (grouping)</label>
                                <select id="dev-notif-tag">
                                    <option value="test">test</option>
                                    <option value="chore-reminder">chore-reminder</option>
                                    <option value="overdue-alert">overdue-alert</option>
                                    <option value="weekly-summary">weekly-summary</option>
                                    <option value="custom">custom (unique)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Linked Chore</label>
                                <select id="dev-notif-chore">
                                    <option value="">None</option>
                                </select>
                            </div>
                        </div>

                        <!-- Actions -->
                        <div class="form-group">
                            <label>Action Button 1</label>
                            <div class="form-row">
                                <select id="dev-notif-action1">
                                    <option value="">None</option>
                                    <option value="complete" selected>complete (Mark Done)</option>
                                    <option value="view">view (View Chore)</option>
                                    <option value="postpone">postpone (Postpone)</option>
                                    <option value="open">open (Open App)</option>
                                    <option value="view-overdue">view-overdue (View Overdue)</option>
                                    <option value="dismiss">dismiss (Dismiss)</option>
                                </select>
                                <input type="text" id="dev-notif-action1-label" placeholder="Button label" value="Mark Done">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Action Button 2</label>
                            <div class="form-row">
                                <select id="dev-notif-action2">
                                    <option value="">None</option>
                                    <option value="complete">complete (Mark Done)</option>
                                    <option value="view">view (View Chore)</option>
                                    <option value="postpone" selected>postpone (Postpone)</option>
                                    <option value="open">open (Open App)</option>
                                    <option value="view-overdue">view-overdue (View Overdue)</option>
                                    <option value="dismiss">dismiss (Dismiss)</option>
                                </select>
                                <input type="text" id="dev-notif-action2-label" placeholder="Button label" value="Postpone">
                            </div>
                        </div>

                        <!-- Behaviour options -->
                        <div class="form-row">
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="dev-notif-require-interaction">
                                    <span>Require Interaction</span>
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="dev-notif-renotify">
                                    <span>Renotify (re-alert same tag)</span>
                                </label>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="dev-notif-silent">
                                    <span>Silent (no sound/vibrate)</span>
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="dev-notif-vibrate" checked>
                                    <span>Vibrate</span>
                                </label>
                            </div>
                        </div>

                        <!-- Vibration pattern -->
                        <div class="form-group">
                            <label>Vibration Pattern</label>
                            <select id="dev-notif-vibrate-pattern">
                                <option value="short">Short pulse (200ms)</option>
                                <option value="double" selected>Double pulse (200-100-200)</option>
                                <option value="urgent">Urgent (300-100-300-100-300)</option>
                                <option value="sos">SOS (100-50-100-50-100-200-300-50-300-50-300-200-100-50-100-50-100)</option>
                                <option value="none">No vibration</option>
                            </select>
                        </div>

                        <!-- Click target -->
                        <div class="form-group">
                            <label>On Click Navigate To</label>
                            <select id="dev-notif-target-view">
                                <option value="dashboard">Dashboard</option>
                                <option value="chores" selected>Chores</option>
                                <option value="family">Family</option>
                                <option value="dev">Dev Tab</option>
                            </select>
                        </div>

                        <!-- Fire buttons -->
                        <div class="dev-btn-grid" style="margin-top: 12px;">
                            <button class="dev-btn dev-btn-orange" onclick="devFireCustomNotif()">Fire Now</button>
                            <button class="dev-btn dev-btn-orange" onclick="devFireCustomViaSW()">Fire via SW</button>
                        </div>
                    </div>

                    <!-- Delayed / Scheduled Notifications -->
                    <div class="dev-custom-notif">
                        <h5>Delayed / Scheduled Notifications</h5>
                        <p class="dev-desc">Schedule notifications to fire after a delay. Uses the custom builder settings above.</p>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Delay (seconds)</label>
                                <input type="number" id="dev-notif-delay" value="5" min="1" max="3600">
                            </div>
                            <div class="form-group">
                                <label>Repeat count</label>
                                <input type="number" id="dev-notif-repeat" value="1" min="1" max="20">
                            </div>
                            <div class="form-group">
                                <label>Interval (seconds)</label>
                                <input type="number" id="dev-notif-interval" value="10" min="1" max="3600">
                            </div>
                        </div>
                        <div class="dev-btn-grid">
                            <button class="dev-btn dev-btn-orange" onclick="devScheduleNotif()">Schedule</button>
                            <button class="dev-btn dev-btn-orange" onclick="devScheduleRepeating()">Schedule Repeating</button>
                            <button class="dev-btn dev-btn-red" onclick="devCancelScheduled()">Cancel All Scheduled</button>
                        </div>
                        <div id="dev-scheduled-list" class="dev-scheduled-list"></div>
                    </div>

                    <!-- Notification burst -->
                    <div class="dev-custom-notif">
                        <h5>Burst / Stress Test</h5>
                        <div class="dev-btn-grid">
                            <button class="dev-btn dev-btn-orange" onclick="devFireNotifBurst(3)">Burst x3</button>
                            <button class="dev-btn dev-btn-orange" onclick="devFireNotifBurst(5)">Burst x5</button>
                            <button class="dev-btn dev-btn-orange" onclick="devFireNotifBurst(10)">Burst x10</button>
                        </div>
                    </div>
                </div>

                <!-- Data Management -->
                <div class="dev-section">
                    <h4 class="dev-section-title dev-section-title-danger">Data Management</h4>
                    <p class="dev-desc">Clear data from the database. These actions cannot be undone.</p>
                    <div class="dev-btn-grid">
                        <button class="dev-btn dev-btn-red" onclick="devClearChores()">Clear All Chores</button>
                        <button class="dev-btn dev-btn-red" onclick="devClearCompletions()">Clear All Completions</button>
                        <button class="dev-btn dev-btn-red" onclick="devClearFamily()">Clear All Family Members</button>
                        <button class="dev-btn dev-btn-red" onclick="devNuclearReset()">Nuclear Reset (Everything)</button>
                    </div>
                    <div class="dev-btn-grid" style="margin-top:8px;">
                        <button class="dev-btn" onclick="devExportJSON()">Export All Data as JSON</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Floating Action Button -->
        <button id="fab-add" class="fab" title="Add New Chore">+</button>

        <!-- ===== Chore Create/Edit Modal ===== -->
        <div id="chore-modal" class="modal-overlay" style="display:none;">
            <div class="modal">
                <div class="modal-header">
                    <h2 id="chore-modal-title">New Chore</h2>
                    <button class="modal-close" id="chore-modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="chore-form">
                        <input type="hidden" id="chore-id">

                        <!-- Basic Info -->
                        <div class="form-section">
                            <h4 class="form-section-title">Basic Info</h4>
                            <div class="form-group">
                                <label for="chore-title">Title *</label>
                                <input type="text" id="chore-title" required placeholder="e.g., Wash dishes, Take out bins">
                            </div>
                            <div class="form-group">
                                <label for="chore-description">Description</label>
                                <textarea id="chore-description" rows="2" placeholder="Optional details or instructions..."></textarea>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="chore-category">Category</label>
                                    <select id="chore-category">
                                        <option value="general">General</option>
                                        <option value="kitchen">Kitchen</option>
                                        <option value="bathroom">Bathroom</option>
                                        <option value="bedroom">Bedroom</option>
                                        <option value="living_room">Living Room</option>
                                        <option value="garden">Garden</option>
                                        <option value="laundry">Laundry</option>
                                        <option value="shopping">Shopping</option>
                                        <option value="pets">Pets</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="chore-priority">Priority</label>
                                    <select id="chore-priority">
                                        <option value="low">Low</option>
                                        <option value="medium" selected>Medium</option>
                                        <option value="high">High</option>
                                        <option value="critical">Critical</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Assignment -->
                        <div class="form-section">
                            <h4 class="form-section-title">Assignment</h4>
                            <div class="form-group">
                                <label for="chore-assigned">Assigned To</label>
                                <select id="chore-assigned">
                                    <option value="">Anyone</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="chore-rotation">
                                    <span>Enable rotation between family members</span>
                                </label>
                                <span class="form-hint">Automatically rotate who does this chore each time</span>
                            </div>
                            <div id="rotation-members-group" class="form-group" style="display: none;">
                                <label>Rotation Members</label>
                                <div id="rotation-members-list" class="checkbox-group"></div>
                            </div>
                        </div>

                        <!-- Schedule -->
                        <div class="form-section">
                            <h4 class="form-section-title">Schedule</h4>
                            <div class="form-group">
                                <label for="chore-frequency">Frequency</label>
                                <select id="chore-frequency">
                                    <option value="daily">Daily</option>
                                    <option value="every_x_days">Every X Days</option>
                                    <option value="weekly">Weekly (pick days)</option>
                                    <option value="biweekly">Biweekly</option>
                                    <option value="monthly">Monthly</option>
                                    <option value="once">One Time Only</option>
                                </select>
                            </div>
                            <div id="frequency-interval-group" class="form-group" style="display: none;">
                                <label for="chore-interval">Every how many days?</label>
                                <input type="number" id="chore-interval" min="2" max="365" value="3">
                            </div>
                            <div id="frequency-weekly-group" class="form-group" style="display: none;">
                                <label>Which days of the week?</label>
                                <div class="day-picker">
                                    <label class="day-chip"><input type="checkbox" name="weekday" value="0"><span>Sun</span></label>
                                    <label class="day-chip"><input type="checkbox" name="weekday" value="1" checked><span>Mon</span></label>
                                    <label class="day-chip"><input type="checkbox" name="weekday" value="2"><span>Tue</span></label>
                                    <label class="day-chip"><input type="checkbox" name="weekday" value="3"><span>Wed</span></label>
                                    <label class="day-chip"><input type="checkbox" name="weekday" value="4"><span>Thu</span></label>
                                    <label class="day-chip"><input type="checkbox" name="weekday" value="5"><span>Fri</span></label>
                                    <label class="day-chip"><input type="checkbox" name="weekday" value="6"><span>Sat</span></label>
                                </div>
                            </div>
                            <div id="frequency-monthly-group" class="form-group" style="display: none;">
                                <label for="chore-monthly-day">Day of the month</label>
                                <input type="number" id="chore-monthly-day" min="1" max="31" value="1">
                            </div>
                            <div class="form-group">
                                <label for="chore-start-date">Start Date</label>
                                <input type="date" id="chore-start-date">
                            </div>
                            <div class="form-group">
                                <label for="chore-preferred-time">Preferred Time of Day</label>
                                <select id="chore-preferred-time">
                                    <option value="anytime">Anytime</option>
                                    <option value="morning">Morning (before 12pm)</option>
                                    <option value="afternoon">Afternoon (12pm - 5pm)</option>
                                    <option value="evening">Evening (after 5pm)</option>
                                </select>
                            </div>
                        </div>

                        <!-- Flexibility & Slack -->
                        <div class="form-section">
                            <h4 class="form-section-title">Flexibility & Slack</h4>
                            <div class="form-group">
                                <label for="chore-slack">Grace Period (days)</label>
                                <input type="number" id="chore-slack" min="0" max="30" value="1">
                                <span class="form-hint">How many days past due date is still OK before it's considered overdue</span>
                            </div>
                            <div class="form-group">
                                <label for="chore-max-postpones">Max Consecutive Postpones</label>
                                <input type="number" id="chore-max-postpones" min="-1" max="99" value="3">
                                <span class="form-hint">Use -1 for unlimited, 0 to disable postponing entirely</span>
                            </div>
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="chore-auto-reschedule" checked>
                                    <span>Auto-reschedule when postponed</span>
                                </label>
                                <span class="form-hint">Pushes the due date forward by 1 day each time the chore is postponed</span>
                            </div>
                            <div class="form-group">
                                <label for="chore-snooze-days">Postpone Duration (days)</label>
                                <input type="number" id="chore-snooze-days" min="1" max="14" value="1">
                                <span class="form-hint">How many days to push forward when postponing</span>
                            </div>
                        </div>

                        <!-- Effort & Rewards -->
                        <div class="form-section">
                            <h4 class="form-section-title">Effort & Rewards</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="chore-effort">Effort Level</label>
                                    <select id="chore-effort">
                                        <option value="quick">Quick (&lt; 15 min)</option>
                                        <option value="medium" selected>Medium (15-45 min)</option>
                                        <option value="long">Long (45+ min)</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Notes -->
                        <div class="form-section">
                            <div class="form-group">
                                <label for="chore-notes">Notes</label>
                                <textarea id="chore-notes" rows="2" placeholder="Any additional notes, tips, or reminders..."></textarea>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" id="chore-delete-btn" class="btn-danger" style="display:none;">Delete</button>
                    <div class="modal-footer-right">
                        <button type="button" id="chore-modal-cancel" class="btn-secondary">Cancel</button>
                        <button type="button" id="chore-modal-save" class="btn-primary">Save Chore</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== Family Member Modal ===== -->
        <div id="family-modal" class="modal-overlay" style="display:none;">
            <div class="modal modal-sm">
                <div class="modal-header">
                    <h2 id="family-modal-title">Add Family Member</h2>
                    <button class="modal-close" id="family-modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="family-form">
                        <input type="hidden" id="member-id">
                        <div class="form-group">
                            <label for="member-name">Name *</label>
                            <input type="text" id="member-name" required placeholder="e.g., Mum, Dad, Alex">
                        </div>
                        <div class="form-group">
                            <label>Avatar</label>
                            <div class="avatar-picker" id="avatar-picker"></div>
                        </div>
                        <div class="form-group">
                            <label>Colour</label>
                            <div class="color-picker" id="color-picker"></div>
                        </div>
                        <div class="form-group">
                            <label for="member-role">Role</label>
                            <select id="member-role">
                                <option value="parent">Parent</option>
                                <option value="child">Child</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" id="family-delete-btn" class="btn-danger" style="display:none;">Delete</button>
                    <div class="modal-footer-right">
                        <button type="button" id="family-modal-cancel" class="btn-secondary">Cancel</button>
                        <button type="button" id="family-modal-save" class="btn-primary">Save</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== Complete Chore Modal ===== -->
        <div id="complete-modal" class="modal-overlay" style="display:none;">
            <div class="modal modal-sm">
                <div class="modal-header">
                    <h2>Complete Chore</h2>
                    <button class="modal-close" id="complete-modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p id="complete-chore-title" class="complete-chore-name"></p>
                    <div class="form-group">
                        <label for="complete-member">Completed by</label>
                        <select id="complete-member"></select>
                    </div>
                    <div class="form-group">
                        <label for="complete-notes">Notes (optional)</label>
                        <input type="text" id="complete-notes" placeholder="Any notes about this completion...">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" id="complete-modal-cancel" class="btn-secondary">Cancel</button>
                    <button type="button" id="complete-modal-save" class="btn-primary">Mark Complete</button>
                </div>
            </div>
        </div>

        <!-- ===== Chore Detail Modal ===== -->
        <div id="detail-modal" class="modal-overlay" style="display:none;">
            <div class="modal">
                <div class="modal-header">
                    <h2 id="detail-modal-title">Chore Details</h2>
                    <button class="modal-close" id="detail-modal-close">&times;</button>
                </div>
                <div class="modal-body" id="detail-modal-body"></div>
                <div class="modal-footer">
                    <button type="button" id="detail-modal-edit" class="btn-secondary">Edit</button>
                    <button type="button" id="detail-modal-ok" class="btn-primary">Close</button>
                </div>
            </div>
        </div>

        <!-- Action Menu Overlay -->
        <div id="action-menu-overlay" class="action-menu-overlay" style="display:none;" onclick="if(event.target===this)closeActionMenu();">
            <div id="action-menu" class="action-menu">
                <div class="action-menu-header">
                    <span id="action-menu-title" class="action-menu-title"></span>
                    <button class="modal-close" onclick="closeActionMenu()">&times;</button>
                </div>
                <div class="action-menu-items"></div>
            </div>
        </div>

        <!-- While You're At It (shown after completing a chore) -->
        <div id="wyai-overlay" class="action-menu-overlay" style="display:none;" onclick="if(event.target===this)closeWyai();">
            <div class="action-menu wyai-menu">
                <div class="action-menu-header">
                    <span class="action-menu-title">While You're At It...</span>
                    <button class="modal-close" onclick="closeWyai()">&times;</button>
                </div>
                <p class="wyai-desc">You just finished a chore! Here are some nearby tasks:</p>
                <div id="wyai-list" class="action-menu-items"></div>
                <div class="wyai-skip">
                    <button class="btn-secondary" onclick="closeWyai()">I'm Good, Thanks</button>
                </div>
            </div>
        </div>

        <footer>
            <p>&copy; 2026 Family Dashboard</p>
        </footer>
    </div>

    <script src="./version.js"></script>
    <script src="./app.js"></script>
</body>
</html>
